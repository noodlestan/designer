---
title: createDecisionLoader()
slug: api/designer-functions/Loader/createDecisionLoader
sidebar:
    label: createDecisionLoader
---

```ts
type createDecisionLoader = (
    schemas: SchemaSource[],
    sources: (DecisionSource | string)[],
    moduleResolver?: (moduleName: string) => Promise<string>,
) => () => Promise<StaticDecisionStore>;
```

## Return value

**() => Promise&lt;[StaticDecisionStore](/api/designer-functions/Types/StaticDecisionStore)&gt;**

A loader function that resolves with a populated decision store.

This loader caches the promise on the first call. Any subsequent calls do not result in any schemas or input files being reloaded, yielding the same result as the first one.

#### Loader implementation

Given a list of paths and schemas configs:

-   Loads schemas from paths and creates a schema map.
-   Validates the schema map and creates a validator.
-   Loads all decisions files and merges all data.
-   Validates decision inputs and returns a [StaticDecisionStore](/api/designer-functions/Types/StaticDecisionStore).

## Params

##### ༶ `schemas`: [SchemaSource](/api/designer-decisions/Types/Meta/SchemaSource)[]

A list of schema configurations to load validation schemas from.

The definition for the built-in schema types can be imported from `@noodlestan/designer-schemas`.

```ts
import { DECISION_SCHEMAS } from '@noodlestan/designer-schemas';
```

##### ༶ `sources`: ([DecisionSource](/api/designer-decisions/Types/Meta/DecisionSource) | string)[]

A list of data sources to load decision data from.

Values of type `string` are treated as paths. Both relative paths (relative to the current working directory) and absolute paths are accepted.

Values of type [DecisionSource](/api/designer-decisions/Types/Meta/DecisionSource).

Designer Decisions sample data and demo data can be imported from `@noodlestan/designer-decisions`.

```ts
import { DEMO_DATA } from '@noodlestan/designer-decision';
```

##### ༶ `moduleResolver` (optional): (moduleName: string) => Promise&lt;string&gt;

A function to resolve the physical location of node modules containing the schemas.

If one isn't provided, the default will be used. It uses [resolve()](https://github.com/browserify/resolve) under the hood and is able to locate the package in most scenarios, including complex monorepos.

## Usage

```ts
import { DECISION_SCHEMAS } from '@noodlestan/designer-schemas';
import { DEMO_DATA } from '@noodlestan/designer-decision';

const LOCAL_DATA = './data';
const loader = createDecisionLoader([DECISION_SCHEMAS], [DEMO_DATA, LOCAL_DATA]);

const store = await loader();
```

## See Also

-   [Guides / Loading and Validating](/guides/loading-and-validating-design-decisions/)
-   [Guides / Generating Docs / Astro/MDX](/guides/generating-documentation/using-astro-components-in-mdx/)
-   [Models / Schemas](/models/schemas/)
-   [API / designer-decisions / SchemaSource](/api/designer-decisions/Types/Meta/SchemaSource)
-   [API / designer-decisions / DecisionSource](/api/designer-decisions/Types/Meta/DecisionSource)
