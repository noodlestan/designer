---
title: Documenting with Astro/MDX
slug: guides/generating-documentation/using-astro-components-in-mdx
description: How to document design decisions and tokens in Astro/Starlight based docs
sidebar:
    order: 42
    label: Documenting with Astro/MDX
---

import { Aside, Code, FileTree } from '@astrojs/starlight/components';
import {
    LayoutStack,
    LayoutCentered,
    LayoutGrid,
    ShowDecision,
    ShowDecisionCard,
} from '@noodlestan/designer-shows/astro';

import { decisionLoader } from '../../../../decisions';
import { GetInvolved } from '../../../../components/atoms';

export const store = await decisionLoader();

This guide explains how to document design decisions and tokens in your documentation using the [built-in Astro components](/integrations/Astro) provided by the [@noodlestan/designer-shows](/api/designer-shows) package.

**Example:**

```mdx
<ShowDecision store={store} d="Brand Color Set" layout="column" size="xs" value="oklch" />
<ShowDecision store={store} d="Sizing Space Scale" layout="column" size="xs" />
```

<LayoutGrid>
    <ShowDecision store={store} d="Brand Color Set" layout="column" size="xs" value="oklch" />
    <ShowDecision store={store} d="Sizing Space Scale" layout="column" size="xs" />
</LayoutGrid>

## Setup

<Aside type="note">
    This guide is for `@noodlestan/designer-shows/astro` components and requires a working
    [Astro](https://docs.astro.build/en/getting-started/) website. You can create a website similar
    to this one using the [Starlight theme](https://starlight.astro.build/getting-started/) in a
    matter of minutes.
</Aside>

### Dependencies

The following packages are required:

-   [@noodlestan/designer-decisions](/api/designer-decisions)
-   [@noodlestan/designer-functions](/api/designer-functions)
-   [@noodlestan/designer-schemas](/api/designer-schemas)
-   [@noodlestan/designer-shows](/api/designer-shows)

```bash
npm install @noodlestan/designer-decisions @noodlestan/designer-functions \
  @noodlestan/designer-schemas @noodlestan/designer-shows
```

### Decision data

Populate your design decisions data source.

As illustrated in the [Capturing Design Decisions](/guides/capturing-design-decisions-in-data) guide, you can simply create one or more JSON files anywhere in your project.

<FileTree>

-   data/
    -   decisions/
        -   color.json
        -   space.json
        -   ...

</FileTree>

### Decision loader

Create a file to declare the loader.

We will use the _all-in-one_ [createDecisionLoader()](/api/designer-functions/Loader/createDecisionLoader/), providing it with:

-   The [schemas](https://github.com/noodlestan/designer/blob/main/packages/libs/designer-schemas/src/constants.ts) for the built-in decision models.
-   A directory to load decision data from.
-   A function to resolve the physical location of node modules containing the schemas.

```ts
// src/decisions/index.ts
import path from 'node:path';

import { createDecisionLoader } from '@noodlestan/designer-functions';
import { DECISION_SCHEMAS } from '@noodlestan/designer-schemas';

const DATA_PATH = path.resolve('./data/decisions');

export const loader = createDecisionLoader(
    [DECISION_SCHEMAS],
    [DATA_PATH],
    // NOTE: you might need to adjust the path according to your repository setup
    async (moduleName: string) => `./node_modules/${moduleName}`,
);
```

<GetInvolved url="https://github.com/noodlestan/designer/issues/80">
    How to provide a package resolution default?
</GetInvolved>

The loader is an async function that returns a decision store. We will pass this store directly to our Astro components for them to retrieve decision data and resolve decision values.

```ts
const store = await loader();
const decision = store.decision('Action Color');
```

## Rendering decisions in MDX

Retrieve the decision `store` and pass it to the components along with the decision name.

In this example we are using the [&lt;ShowDecision/&gt;](/integrations/Astro/ShowDecision/) component to render both a [ColorValueDecision](/models/decision-types/color-value) and a [ColorSetDecision](/models/decision-types/color-set).

```mdx
// src/content/page.mdx
import { ShowDecision } from '@noodlestan/designer-shows/astro';
import { loader } from '../decisions';

export const store = await loader();

<ShowDecision store={store} d="Action Color" size="m" />
<ShowDecision store={store} d="Brand Color Set" layout="column" size="s" />
```

<LayoutGrid>
    <ShowDecision store={store} d="Action Color" size="m" />
    <ShowDecision store={store} d="Brand Color Set" layout="column" size="s" />
</LayoutGrid>

In the [Astro integration](/integrations/Astro) docs you can find a comprehensive set of components for rendering decisions in different scenarios and layouts.

For instance, the [&lt;ShowDecisionCard/&gt;](/integrations/Astro/ShowDecisionCard/) component composes decision visualization, value, and details in a single layout.

```mdx
// src/content/page.mdx
import { ShowDecisionCard } from '@noodlestan/designer-shows/astro';

<ShowDecisionCard store={store} d="Action Color" />
```

<ShowDecisionCard store={store} d="Action Color" />

## Customizing value and visualization

All decision components expose [common props](/integrations/Astro/Props/#valueprops) that provide a high degree of control over how the decisions are rendered:

-   `value` - hide or format the decision value
-   `viz` - hide or configure the visualization
-   `options` - visualization options passed down to the viz components (ðŸš§ link)

### Formatting the decision value

With some decision types, you may want to display their value in specific formats. The `value` prop is passed down to the specific decision component to control how the value is displayed.

For instance, the [ShowColorValue](/integrations/Astro/Composable/Values/#showcolorvalue) components can display the color value in one or more color spaces.

```mdx
<ShowDecision store={store} d="Action Color" value={['rgb', 'oklch']} size="m" />
```

<ShowDecision store={store} d="Action Color" value={['rgb', 'oklch']} size="m" />

### Hiding the decision value

In this example we are hiding the decision value and rendering its visualization under a custom label.

```mdx
<label>Brand Blue</label>
<ShowDecision store={store} d="Brand Blue" value={false} size="l" />
```

<LayoutStack>
    <label>Brand Blue</label>
    <ShowDecision store={store} d="Brand Blue" value={false} size="l" />
</LayoutStack>

### Choosing a different visualization

Some decision types can be rendered using different visualizations.

The `viz` prop is passed down to value components to determine which visualization is used.

For instance, the [ShowSpaceViz](/integrations/Astro/Composable/Visualizations/#showspaceviz) component can represent a space value with a few different shapes.

```mdx
<ShowDecision store={store} d="Avatar Minimum Size" viz="circle" />
<ShowDecision store={store} d="Card Thumb Minimum Size" viz="square" />
```

<LayoutGrid>
    <ShowDecision store={store} d="Avatar Minimum Size" viz="circle" />
    <ShowDecision store={store} d="Card Thumb Minimum Size" viz="square" />
</LayoutGrid>

### Configuring visualization options

(ðŸš§ links)

Some visualization primitives expose also an `options` prop.

In this example we are rendering the same color decision using two different modes: `fg` and `bg`.

In both cases we are providing a `contrast` color. We also set the custom `content` for the first one, and switch to `text` mode on the second.

```mdx
<ShowDecision ... viz="fg" options={{ contrast: '#000000', content: 'Hello' }} />
<ShowDecision ... viz="bg" options={{ contrast: '#FFFFFF', mode: 'text' }} />
```

<LayoutGrid>
    <ShowDecision
        store={store}
        d="Action Color"
        value={false}
        viz="fg"
        options={{ contrast: '#000000', content: 'Hello' }}
    />
    <ShowDecision
        store={store}
        d="Action Color"
        value={false}
        viz="bg"
        options={{ contrast: '#FFFFFF', mode: 'text' }}
    />
</LayoutGrid>

### Hiding the visualization

In this example we are hiding the visualization and rendering its value next to a custom label.

```mdx
RGB: <ShowDecision store={store} d="Brand Pink" viz={false} value="hsl" />
```

<LayoutCentered pad="l">
    RGB <ShowDecision store={store} d="Brand Pink" viz={false} />
</LayoutCentered>

## See Also

-   [Examples](/examples)
-   [Astro integration](/integrations/Astro)
