---
title: Rendering Decisions in Docs
slug: guides/documenting-design-decisions-with-astro-and-mdx
description: How to document design decisions and tokens for Astro/Starlight based docs
sidebar:
    order: 40
---

import { CardGrid, Code, FileTree, LinkCard } from '@astrojs/starlight/components';
import {
    FlexStack,
    FlexRow,
    ShowDecision,
    ShowDecisionCard,
} from '@noodlestan/designer-shows/astro';

import { decisionLoader } from '../../../decisions';

export const store = await decisionLoader();

This guide explains how to document design decisions and tokens in your documentation
using the [built-in components](/components) provided by the
[@noodlestan/designer-shows](/api/designer-shows) package.

**Example:**

```mdx
<ShowDecision store={store} d="Brand Color Set" size="xs" value="hsl" />
<ShowDecision store={store} d="Sizing Space Scale" size="xs" />
```

<CardGrid>
    <ShowDecision store={store} d="Brand Color Set" size="xs" value="hsl" />
    <ShowDecision store={store} d="Sizing Space Scale" size="xs" />
</CardGrid>

## Setup

ðŸš§ This guide is for `@noodlestan/designer-shows/astro` components and requires a working
[Astro](https://docs.astro.build/en/getting-started/) website. You can create a website similar
to this one using the [Starlight theme](https://starlight.astro.build/getting-started/) in
a matter of minutes.

### Dependencies

The following packages are required:

-   [@noodlestan/designer-decisions](/api/designer-decisions)
-   [@noodlestan/designer-functions](/api/designer-functions)
-   [@noodlestan/designer-schemas](/api/designer-schemas)
-   [@noodlestan/designer-shows](/api/designer-shows)

```bash
npm install @noodlestan/designer-decisions @noodlestan/designer-functions \
  @noodlestan/designer-schemas @noodlestan/designer-shows
```

### Decision data

Populate your design decisions data source. ðŸš§

As illustrated in the [Capturing Design Decisions](/guides/capturing-design-decisions-in-data)
guide, you can simply create one or more JSON files anywhere in your project.

<FileTree>

-   data/
    -   decisions/
        -   color.json
        -   space.json
        -   ...

</FileTree>

### Decision loader

Create a file to declare the loader.

We will use the _all-in-one_
[createDecisionLoader()](/api/designer-functions/Loader/createDecisionLoader/),
providing it with:

-   The
    schemas for the built-in decision models
    https://github.com/noodlestan/designer/blob/main/packages/libs/designer-schemas/src/constants.ts
-   A directory to load decision data from.
-   A function to resolve the physical location of node modules containing the schemas.

```ts
// src/decisions/index.ts
import path from 'node:path';

import { createDecisionLoader } from '@noodlestan/designer-functions';
import { DECISION_SCHEMAS } from '@noodlestan/designer-schemas';

const DATA_PATH = path.resolve('./data/decisions');

export const loader = createDecisionLoader(
    [DECISION_SCHEMAS],
    [DATA_PATH],
    async (moduleName: string) => `./node_modules/${moduleName}`,
);
```

API ðŸš§ðŸš§ Banner: Help appreciated: how to provide a package resolution default?

The loader is an async function that returns a decision store. We will pass this
store directly to our Astro components for them to retrieve decision data and
resolve decision values.

```ts
const store = await loader();
const decision = store.decision('Action Color');
```

## Rendering decisions in MDX

Retrieve the decision `store` and pass it to the components along with the decision name.

In this example we are using the [&lt;ShowDecision/&gt;](/components/Astro/Decisions/show-decision/)
component to render both a [ColorValueDecision](/decision-models/color-value) and a
[ColorSetDecision](/decision-models/color-set).

```mdx
// src/content/page.mdx
import { ShowDecision } from '@noodlestan/designer-shows/astro';
import { loader } from '../decisions';

export const store = await loader();

<ShowDecision store={store} d="Action Color" size="m" />
<ShowDecision store={store} d="Pink Palette" size="xs" />
```

<CardGrid>
    <ShowDecision store={store} d="Action Color" size="m" />
    <ShowDecision store={store} d="Pink Palette" size="xs" />
</CardGrid>

In the [Components reference](/components) you will find a comprehensive set of components
for rendering decisions in different scenarios and layouts.

For instance, the [&lt;ShowDecisionCard/&gt;](/components/Astro/Cards/show-decision-card/)
component composes decision visualization, value, and details in a single layout.

```mdx
// src/content/page.mdx
import { ShowDecisionCard } from '@noodlestan/designer-shows/astro';

<CardGrid>
    <ShowDecisionCard d="Action Color" loader={decisionLoader} />
</CardGrid>
```

<FlexStack vpad>
    <ShowDecisionCard store={store} d="Action Color" />
</FlexStack>

## Customizing value and visualization

All decision components expose [common props](/components/Astro/Props/#valueprops) that
provide a high degree of control over how the decisions are rendered:

-   `value` - hide or format the decision value
-   `viz` - hide or configure the visualization
-   `options` - visualization options passed down to the viz components (ðŸš§ link)

### Formatting the decision value

With some decision types, you may want to display their value in specific formats. The `value`
prop is passed down to the specific decision component to control how the value is displayed.

For instance, [Color Decisions](/components/Astro/Decisions/color) components
can display the color value in one or more color spaces.

```mdx
<ShowDecision store={store} d="Action Color" value={['rgb', 'oklch']} size="m" />
```

<CardGrid>
    <ShowDecision store={store} d="Action Color" value={['rgb', 'oklch']} size="m" />
</CardGrid>

### Hiding the decision value

In this example we are hiding the decision value and rendering its visualization
under a custom label.

```mdx
<label>Brand Blue</label>
<ShowDecision store={store} d="Brand Blue" value={false} size="l" />
```

<FlexStack vpad>
    <label>Brand Blue</label>
    <ShowDecision store={store} d="Brand Blue" value={false} size="l" />
</FlexStack>

### Choosing a different visualization

Some decision types can be rendered using different visualizations.

The `viz` prop is passed down to value components to determine which visualization is used.

For instance, [Space Decisions](/components/Astro/Decisions/space) components
can represent a space value with a few different shapes.

```mdx
<ShowDecision store={store} d="Avatar Minimum Size" viz="circle" />
<ShowDecision store={store} d="Card Thumb Minimum Size" viz="square" />
```

<CardGrid>
    <ShowDecision store={store} d="Avatar Minimum Size" viz="circle" />
    <ShowDecision store={store} d="Card Thumb Minimum Size" viz="square" />
</CardGrid>

### Configuring visualization options

(ðŸš§ links)

Some visualization primitives expose also an `options` prop.

In this example we are rendering the same color decision using two different
modes: `fg` and `bg`.

In both cases we are providing a `contrast` color. We also set the
custom `content` for the first one, and switch to `text` mode on the second.

```mdx
<ShowDecision ... viz="fg" options={{ contrast: '#000000', content: 'Hello' }} />
<ShowDecision ... viz="bg" options={{ contrast: '#FDFBFC', mode: 'text' }} />
```

<CardGrid>
    <ShowDecision
        store={store}
        d="Action Color"
        value={false}
        viz="fg"
        options={{ contrast: '#000000', content: 'Hello' }}
    />
    <ShowDecision
        store={store}
        d="Action Color"
        value={false}
        viz="bg"
        options={{ contrast: '#FDFBFC', mode: 'text' }}
    />
</CardGrid>

### Hiding the visualization

In this example we are hiding the visualization and rendering its value
next to a custom label.

```mdx
RGB: <ShowDecision store={store} d="Brand Pink" viz={false} value="hsl" />
```

<FlexRow align="center" vpad>
    RGB: <ShowDecision store={store} d="Brand Pink" viz={false} />
</FlexRow>

## See Also

-   [Examples](/examples)
-   [Components Reference](/components)
