---
import { ShowError } from '../../atoms';
import { resolveVizContent } from '../../helpers';
import type { TypeVizProps } from '../../types';

type Props = TypeVizProps;

const { v: typeface, muteErrors } = Astro.props;

const content = resolveVizContent(
    { mode: 'text', content: 'The quick brown fox jumps over the lazy dog' },
    's',
);

const showErrors = !muteErrors && typeface?.context().hasErrors();
const family = typeface?.get().fontName;
---

<div class:list={['dd-type-short-text-viz']}>
    {showErrors && <ShowError size="s" position="block" />}
    <div class="dd-circle">{content}</div>
</div>

<style define:vars={{ __family: family }}>
    .dd-type-short-text-viz {
        position: relative;
        font-family: var(--__family);
        font-size: var(--dd-description-size);
    }

    .dd-type-short-text-viz :global(.dd-show-error) {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>
