---
import { type SpaceValue } from '@noodlestan/designer-decisions';

import { DecisionValueContainer, ShowError } from '../../atoms';
import { LayoutStack } from '../../layouts';
import type { ShowValueProps } from '../../types';

type Props = ShowValueProps & {
    v?: SpaceValue;
};

const { v: spaceValue, value = true, muteErrors } = Astro.props;

const { value: v, units } = spaceValue?.toObject() || {};
const vWithUnits = `${v}${units}`;
const showErrors = !muteErrors && spaceValue?.context().hasErrors();
---

{
    value && spaceValue !== undefined && (
        <LayoutStack>
            <DecisionValueContainer>
                {showErrors && <ShowError size="xs" />}
                {vWithUnits}
            </DecisionValueContainer>
        </LayoutStack>
    )
}
