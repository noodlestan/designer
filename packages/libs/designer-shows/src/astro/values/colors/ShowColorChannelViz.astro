---
import type {
    ColorChannelValue,
    ColorChannelName,
    ColorComplementaryChannels,
    ColorChannelValueCommon,
} from '@noodlestan/designer-decisions';

import type { ShowVizProps } from '../../types';
import { ColorSwatchViz } from '../../viz';

type Props = ShowVizProps & {
    v?: ColorChannelValue;
};

const { v, viz = true, size, options } = Astro.props;

const channelToColors: Record<ColorChannelName, ColorComplementaryChannels> = {
    'srgb-hue': { s: 0.5, l: 0.5 },
    'srgb-saturation': { h: 0, l: 0.5 },
    'srgb-lightness': { h: 0, s: 0.1 },
    'oklab-lightness': { c: 0.15, h: 0 },
    'oklab-chroma': { l: 0.5, h: 0 },
    'oklab-hue': { l: 0.5, c: 0.15 },
};

const channelV = v as ColorChannelValueCommon;
const channel = channelV.name();
const channelColor = channelV?.toColor(channelToColors[channel]);

const opt = options || {};
---

{viz && channelColor && <ColorSwatchViz v={channelColor} size={size} options={opt} />}
