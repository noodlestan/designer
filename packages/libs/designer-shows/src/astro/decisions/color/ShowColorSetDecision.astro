---
import { isColorSetDecision } from '@noodlestan/designer-decisions';

import type { ShowDecisionProps } from '../../types';
import { ShowColorValue } from '../../primitives';
import { resolveDecisionProp } from '../../helpers';
import { FlexStack } from '../../layouts';

type Props = ShowDecisionProps;

const { store, d, size, ...rest } = Astro.props;

const decision = resolveDecisionProp(store, d);
const set = decision && isColorSetDecision(decision) ? decision.produce().value() : undefined;

const colors = set?.get();
const s = size || 's';
---

<FlexStack>
    {colors?.map(color => <ShowColorValue color={color} size={s} {...rest} />)}
</FlexStack>
