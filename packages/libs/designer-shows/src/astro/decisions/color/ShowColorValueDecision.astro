---
import {
    createStaticDecisionStore,
    createStaticInputMap,
    isColorValueDecision,
} from '@noodlestan/designer-decisions';

import { getCollection } from 'astro:content';
import { ShowColorSwatch } from '../../primitives';
import { undefined } from 'astro:schema';
import type { ColorValue } from '@noodlestan/designer-decisions';

interface Props {
    d: string;
}

const { d } = Astro.props;

const decisions = await getCollection('decisions');
const inputStore = createStaticInputMap(decisions);
const store = createStaticDecisionStore(inputStore);

const decision = store.decision({ $name: d });
const color = decision
    ? isColorValueDecision(decision)
        ? (decision.produce().value() as ColorValue)
        : null
    : null;
---

{decision && color ? <ShowColorSwatch color={color} /> : <>N/A</>}
