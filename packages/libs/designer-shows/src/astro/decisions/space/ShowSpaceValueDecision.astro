---
import { isSpaceValueDecision } from '@noodlestan/designer-decisions';

import type { ShowDecisionProps } from '../../types';
import { resolveDecisionProp } from '../../helpers';
import ShowSpaceValue from '../../values/space/ShowSpaceValue.astro';
import { ShowDecisionUnavailable } from '../unavailable';

type Props = ShowDecisionProps;

const { store, d, ...rest } = Astro.props;

const decision = resolveDecisionProp(store, d);
const space = decision && isSpaceValueDecision(decision) ? decision.produce().value() : undefined;
---

{decision && <ShowSpaceValue v={space} {...rest} />}
{!decision && <ShowDecisionUnavailable d={d as string} />}
