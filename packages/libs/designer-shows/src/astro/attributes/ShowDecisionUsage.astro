---
import { type ShowDecisionProps } from '../types';
import { LayoutFlex } from '../layouts';

type Props = ShowDecisionProps;

const { store, d } = Astro.props;

const [, decision] = store.decision({ $name: d });
const { isFor = [], notFor = [] } = decision?.inputs()[0].usage || {}; // WIP match context (and encapsulate)
---

<div class="dd-decision-usage">
    {
        isFor.length > 0 && (
            <LayoutFlex wrap={false}>
                <h4 class="dd-group-header">Intended For:</h4>
                <LayoutFlex tag="ul" gap="s">
                    {isFor.map(item => (
                        <li class="dd-item">{item}</li>
                    ))}
                </LayoutFlex>
            </LayoutFlex>
        )
    }
    {
        notFor.length > 0 && (
            <LayoutFlex>
                <h4 class="dd-group-header">Not For:</h4>
                <LayoutFlex tag="ul" gap="s">
                    {notFor.map(item => (
                        <li class="dd-item">{item}</li>
                    ))}
                </LayoutFlex>
            </LayoutFlex>
        )
    }
</div>

<style>
    .dd-decision-usage {
        display: flex;
        flex-direction: column;
        gap: var(--dd-space-gap);
    }

    .dd-decision-usage .dd-group-header {
        font-size: 1rem;
        line-height: 1.5rem;
        font-weight: 600;
        color: var(--dd-color-text);
        white-space: nowrap;
    }

    .dd-decision-usage .dd-item {
        padding: 0;
        font-size: 1rem;
        line-height: 1.5rem;
        font-weight: 300;
        color: var(--dd-color-text);
    }
</style>
